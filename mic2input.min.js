document.addEventListener('DOMContentLoaded', function() { 
    // Function to add microphone icon to input fields 
    function addMicrophoneIcons() { 
        const inputs = document.querySelectorAll('input[type="text"]'); 
        inputs.forEach(input => { 
            // Check if the microphone icon already exists
            if (!input.nextElementSibling || !input.nextElementSibling.classList.contains('microphone-icon')) {
                const icon = document.createElement('span'); 
                icon.innerHTML = 'ðŸŽ¤'; // HTML5 microphone emoji 
                icon.classList.add('microphone-icon'); 
                input.parentNode.insertBefore(icon, input.nextSibling); 
                // Add click event listener to the icon 
                icon.addEventListener('click', function() { 
                    startSpeechRecognition(input); 
                }); 
            }
        }); 
    } 

    // Function to start speech recognition 
    function startSpeechRecognition(input) { 
        if ('webkitSpeechRecognition' in window) { 
            const recognition = new webkitSpeechRecognition(); 
            recognition.continuous = false; 
            recognition.interimResults = false; 
            recognition.onresult = function(event) { 
                const last = event.results.length - 1; 
                const resultText = event.results[last][0].transcript; 
                input.value = resultText; 
            }; 
            recognition.start(); 
        } else { 
            console.warn('Speech recognition is not supported by this browser.'); 
            document.querySelectorAll('.microphone-icon').remove();
        } 
    } 

    // Call the function to add microphone icons 
    addMicrophoneIcons(); 
});
